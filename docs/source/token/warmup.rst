0. Warm up
==========

Let's make sure you are able to run Certora Sunbeam. Run the following:

.. code-block:: bash

   cd projects/token/confs
   certoraSorobanProver setup.conf

You should see an output like so:

.. code-block:: bash

   INFO: Building from script ../certora_build.py

   Connecting to server...

   Job submitted to server

   Manage your jobs at https://prover.certora.com
   Follow your job and see verification results at <LINK>

Click on that link to see the report page generated by Certora Sunbeam.
It will show you that a basic :index:`sanity` check has passed, indicated
by a green check mark next to "sanity" in the Rules list. 
You can see the set of *Source Files* that were used by clicking on the
File Tree icon to the left of the Rules list.
Now, click on the "satisfy" rule to display related information in the *Call Trace* 
panel that shows you the startng state and sequence of function calls that led to this outcome.

.. index:: satisfy

:clink:`src/certora/spec.rs <@token-proj/src/certora/spec.rs>` will show you the
*sanity* rule we just ran.
This rule simply calls :rust:`Token::balance()` and checks that the control reaches
the :cvl:`cvlr_satisfy` macro that follows.
You can read more about the semantics of :cvl:`satisfy`
`here <https://docs.certora.com/en/latest/docs/cvl/statements.html#satisfy>`_.

.. important::

   If you are not able to run ``certoraSorobanProver``, see the `Sunbeam Troubleshooting`_ section in
   the Documentation.

.. dropdown:: Solution

   .. cvlinclude:: @token-proj/solutions/solution_specs.rs
      :language: rust
      :start-at: Exercise 0
      :end-before: Exercise 1
      :caption:


.. Links
   =====

.. _Sunbeam Troubleshooting:
   https://docs.certora.com/en/latest/docs/sunbeam/troubleshooting.html
